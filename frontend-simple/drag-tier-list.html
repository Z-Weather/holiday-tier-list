<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‹–æ‹½èŠ‚æ—¥å±‚çº§åˆ—è¡¨ - Holiday Tier List</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* å±‚çº§åŒºåŸŸæ ·å¼ */
        .tier-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .tier-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .tier-row {
            display: flex;
            min-height: 100px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .tier-row.drag-over {
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .tier-label {
            width: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .tier-s { background: linear-gradient(135deg, #ff6b35, #ff5722); }
        .tier-a { background: linear-gradient(135deg, #f7931e, #ff9800); }
        .tier-b { background: linear-gradient(135deg, #ffd100, #ffeb3b); color: #333 !important; }
        .tier-c { background: linear-gradient(135deg, #90ee90, #4caf50); }
        .tier-d { background: linear-gradient(135deg, #87ceeb, #2196f3); }
        .tier-f { background: linear-gradient(135deg, #ff6b6b, #f44336); }

        .tier-content {
            flex: 1;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            padding: 15px;
            min-height: 100px;
            gap: 15px;
            flex-wrap: wrap;
            border: 3px dashed transparent;
            transition: all 0.3s ease;
        }

        .tier-content.drag-over {
            border-color: #2196f3;
            background: #e3f2fd;
        }

        .tier-content.empty {
            justify-content: center;
            color: #999;
            font-style: italic;
        }

        /* èŠ‚å‡æ—¥å¡ç‰‡æ ·å¼ */
        .holiday-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            min-width: 120px;
            text-align: center;
            cursor: grab;
            transition: all 0.3s ease;
            user-select: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .holiday-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            border-color: #2196f3;
        }

        .holiday-card.dragging {
            opacity: 0.7;
            transform: rotate(5deg) scale(1.05);
            cursor: grabbing;
            z-index: 1000;
        }

        .holiday-card .emoji {
            font-size: 3rem;
            margin-bottom: 8px;
            display: block;
        }

        .holiday-card .name {
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .holiday-card .date {
            font-size: 0.8rem;
            color: #666;
        }

        /* å¯ç”¨èŠ‚å‡æ—¥æ± æ ·å¼ */
        .holiday-pool {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 3px dashed transparent;
            transition: all 0.3s ease;
        }

        .holiday-pool.drag-over {
            border-color: #4caf50;
            background: #e8f5e8;
            transform: scale(1.02);
        }

        .holiday-pool h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 1.3rem;
            text-align: center;
        }

        .holiday-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
        }

        /* æ“ä½œæŒ‰é’® */
        .controls {
            text-align: center;
            margin: 20px 0;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin: 0 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .btn.secondary {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
        }

        /* æç¤ºä¿¡æ¯ */
        .instructions {
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            color: #333;
        }

        /* é€šçŸ¥æ ·å¼ */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            z-index: 2000;
            transform: translateX(400px);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(135deg, #4caf50, #45a049);
        }

        .notification.info {
            background: linear-gradient(135deg, #2196f3, #1976d2);
        }

        .notification.warning {
            background: linear-gradient(135deg, #ff9800, #f57400);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .tier-row {
                flex-direction: column;
            }

            .tier-label {
                width: 100%;
                min-height: 50px;
            }

            .holiday-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }

            .notification {
                top: 10px;
                right: 10px;
                left: 10px;
                transform: translateY(-100px);
            }

            .notification.show {
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ‰ èŠ‚æ—¥åå¥½å±‚çº§åˆ—è¡¨</h1>
            <p>æ‹–æ‹½ä¸‹æ–¹çš„æ³•å®šèŠ‚å‡æ—¥åˆ°å¯¹åº”çš„ç­‰çº§ä¸­</p>
        </div>

        <div class="instructions">
            <strong>ğŸ“ ä½¿ç”¨è¯´æ˜ï¼š</strong>
            â€¢ ä»ä¸‹æ–¹çš„èŠ‚å‡æ—¥æ± ä¸­æ‹–æ‹½èŠ‚å‡æ—¥å¡ç‰‡åˆ°ä¸Šæ–¹å¯¹åº”çš„å±‚çº§ä¸­<br>
            â€¢ ä¹Ÿå¯ä»¥ä»å±‚çº§ä¸­æ‹–æ‹½èŠ‚å‡æ—¥å¡ç‰‡å›åˆ°èŠ‚å‡æ—¥æ± <br>
            â€¢ Sçº§ä¸ºæœ€å–œæ¬¢ï¼ŒFçº§ä¸ºæœ€ä¸å–œæ¬¢
        </div>

        <div class="controls">
            <button class="btn" onclick="saveToServer()">ğŸ’¾ ä¿å­˜åˆ°æœåŠ¡å™¨</button>
            <button class="btn secondary" onclick="resetTierList()">ğŸ”„ é‡ç½®åˆ—è¡¨</button>
            <button class="btn" onclick="exportTierList()">ğŸ“¤ å¯¼å‡ºJSON</button>
        </div>

        <!-- å±‚çº§åŒºåŸŸ -->
        <div class="tier-container">
            <div class="tier-list">
                <div class="tier-row" data-tier="S">
                    <div class="tier-label tier-s">S çº§</div>
                    <div class="tier-content" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                        <span class="empty-text">æ‹–æ‹½èŠ‚å‡æ—¥åˆ°è¿™é‡Œ - æœ€å–œæ¬¢çš„èŠ‚æ—¥</span>
                    </div>
                </div>

                <div class="tier-row" data-tier="A">
                    <div class="tier-label tier-a">A çº§</div>
                    <div class="tier-content" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                        <span class="empty-text">æ‹–æ‹½èŠ‚å‡æ—¥åˆ°è¿™é‡Œ - å¾ˆå–œæ¬¢çš„èŠ‚æ—¥</span>
                    </div>
                </div>

                <div class="tier-row" data-tier="B">
                    <div class="tier-label tier-b">B çº§</div>
                    <div class="tier-content" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                        <span class="empty-text">æ‹–æ‹½èŠ‚å‡æ—¥åˆ°è¿™é‡Œ - æ¯”è¾ƒå–œæ¬¢çš„èŠ‚æ—¥</span>
                    </div>
                </div>

                <div class="tier-row" data-tier="C">
                    <div class="tier-label tier-c">C çº§</div>
                    <div class="tier-content" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                        <span class="empty-text">æ‹–æ‹½èŠ‚å‡æ—¥åˆ°è¿™é‡Œ - ä¸€èˆ¬çš„èŠ‚æ—¥</span>
                    </div>
                </div>

                <div class="tier-row" data-tier="D">
                    <div class="tier-label tier-d">D çº§</div>
                    <div class="tier-content" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                        <span class="empty-text">æ‹–æ‹½èŠ‚å‡æ—¥åˆ°è¿™é‡Œ - ä¸å¤ªå–œæ¬¢çš„èŠ‚æ—¥</span>
                    </div>
                </div>

                <div class="tier-row" data-tier="F">
                    <div class="tier-label tier-f">F çº§</div>
                    <div class="tier-content" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                        <span class="empty-text">æ‹–æ‹½èŠ‚å‡æ—¥åˆ°è¿™é‡Œ - æœ€ä¸å–œæ¬¢çš„èŠ‚æ—¥</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- èŠ‚å‡æ—¥æ±  -->
        <div class="holiday-pool" ondrop="dropToPool(event)" ondragover="allowDropToPool(event)" ondragleave="dragLeavePool(event)">
            <h3>ğŸŠ æ³•å®šèŠ‚å‡æ—¥æ± </h3>
            <div class="holiday-grid" id="holidayPool">
                <!-- èŠ‚å‡æ—¥å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <script>
        // æ³•å®šèŠ‚å‡æ—¥æ•°æ®
        const holidays = [
            { id: 'new-year', name: 'å…ƒæ—¦', emoji: 'ğŸŠ', date: '1æœˆ1æ—¥', category: 'national' },
            { id: 'spring-festival', name: 'æ˜¥èŠ‚', emoji: 'ğŸ§§', date: 'å†œå†æ­£æœˆåˆä¸€', category: 'traditional' },
            { id: 'qingming', name: 'æ¸…æ˜èŠ‚', emoji: 'ğŸŒ¸', date: '4æœˆ4-6æ—¥', category: 'traditional' },
            { id: 'labor-day', name: 'åŠ³åŠ¨èŠ‚', emoji: 'âš’ï¸', date: '5æœˆ1æ—¥', category: 'national' },
            { id: 'youth-day', name: 'é’å¹´èŠ‚', emoji: 'ğŸ‘¨â€ğŸ“', date: '5æœˆ4æ—¥', category: 'commemorative' },
            { id: 'dragon-boat', name: 'ç«¯åˆèŠ‚', emoji: 'ğŸ²', date: 'å†œå†äº”æœˆåˆäº”', category: 'traditional' },
            { id: 'childrens-day', name: 'å„¿ç«¥èŠ‚', emoji: 'ğŸ§’', date: '6æœˆ1æ—¥', category: 'commemorative' },
            { id: 'mid-autumn', name: 'ä¸­ç§‹èŠ‚', emoji: 'ğŸ¥®', date: 'å†œå†å…«æœˆåäº”', category: 'traditional' },
            { id: 'national-day', name: 'å›½åº†èŠ‚', emoji: 'ğŸ‡¨ğŸ‡³', date: '10æœˆ1æ—¥', category: 'national' },
            { id: 'christmas', name: 'åœ£è¯èŠ‚', emoji: 'ğŸ„', date: '12æœˆ25æ—¥', category: 'western' },
            { id: 'valentines', name: 'æƒ…äººèŠ‚', emoji: 'ğŸ’•', date: '2æœˆ14æ—¥', category: 'western' },
            { id: 'womens-day', name: 'å¦‡å¥³èŠ‚', emoji: 'ğŸ‘©', date: '3æœˆ8æ—¥', category: 'commemorative' },
            { id: 'teachers-day', name: 'æ•™å¸ˆèŠ‚', emoji: 'ğŸ‘¨â€ğŸ«', date: '9æœˆ10æ—¥', category: 'commemorative' },
            { id: 'halloween', name: 'ä¸‡åœ£èŠ‚', emoji: 'ğŸƒ', date: '10æœˆ31æ—¥', category: 'western' }
        ];

        // å½“å‰æ‹–æ‹½çš„å…ƒç´ 
        let draggedElement = null;

        // åˆå§‹åŒ–é¡µé¢
        function initializePage() {
            renderHolidays();
            updateEmptyStates();
        }

        // æ¸²æŸ“èŠ‚å‡æ—¥å¡ç‰‡
        function renderHolidays() {
            const pool = document.getElementById('holidayPool');
            pool.innerHTML = '';

            holidays.forEach(holiday => {
                const card = createHolidayCard(holiday);
                pool.appendChild(card);
            });
        }

        // åˆ›å»ºèŠ‚å‡æ—¥å¡ç‰‡
        function createHolidayCard(holiday) {
            const card = document.createElement('div');
            card.className = 'holiday-card';
            card.draggable = true;
            card.dataset.holidayId = holiday.id;

            card.innerHTML = `
                <span class="emoji">${holiday.emoji}</span>
                <div class="name">${holiday.name}</div>
                <div class="date">${holiday.date}</div>
            `;

            // æ‹–æ‹½äº‹ä»¶
            card.addEventListener('dragstart', function(e) {
                draggedElement = this;
                this.classList.add('dragging');
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/html', this.outerHTML);
            });

            card.addEventListener('dragend', function(e) {
                this.classList.remove('dragging');
                draggedElement = null;
            });

            return card;
        }

        // å…è®¸æ‹–æ‹½
        function allowDrop(ev) {
            ev.preventDefault();
            ev.target.closest('.tier-content').classList.add('drag-over');
            ev.target.closest('.tier-row').classList.add('drag-over');
        }

        // æ‹–æ‹½ç¦»å¼€å±‚çº§åŒºåŸŸ
        function dragLeave(ev) {
            const tierContent = ev.target.closest('.tier-content');
            const tierRow = ev.target.closest('.tier-row');

            // æ£€æŸ¥æ˜¯å¦çœŸçš„ç¦»å¼€äº†åŒºåŸŸ
            if (!tierContent.contains(ev.relatedTarget)) {
                tierContent.classList.remove('drag-over');
                tierRow.classList.remove('drag-over');
            }
        }

        // å…è®¸æ‹–æ‹½åˆ°èŠ‚å‡æ—¥æ± 
        function allowDropToPool(ev) {
            ev.preventDefault();
            const pool = ev.target.closest('.holiday-pool');
            pool.classList.add('drag-over');
        }

        // æ‹–æ‹½ç¦»å¼€èŠ‚å‡æ—¥æ± 
        function dragLeavePool(ev) {
            const pool = ev.target.closest('.holiday-pool');

            // æ£€æŸ¥æ˜¯å¦çœŸçš„ç¦»å¼€äº†èŠ‚å‡æ—¥æ± åŒºåŸŸ
            if (!pool.contains(ev.relatedTarget)) {
                pool.classList.remove('drag-over');
            }
        }

        // æ”¾ç½®åˆ°èŠ‚å‡æ—¥æ± 
        function dropToPool(ev) {
            ev.preventDefault();

            const pool = ev.target.closest('.holiday-pool');
            pool.classList.remove('drag-over');

            if (draggedElement) {
                const holidayGrid = document.getElementById('holidayPool');

                // æ£€æŸ¥æ˜¯å¦å·²ç»åœ¨èŠ‚å‡æ—¥æ± ä¸­
                const isInPool = holidayGrid.contains(draggedElement);

                if (!isInPool) {
                    // å…‹éš†å…ƒç´ å¹¶æ·»åŠ åˆ°èŠ‚å‡æ—¥æ± 
                    const clonedElement = draggedElement.cloneNode(true);
                    addDragEvents(clonedElement);
                    holidayGrid.appendChild(clonedElement);

                    // ä»åŸä½ç½®ç§»é™¤
                    draggedElement.remove();

                    // æ›´æ–°ç©ºçŠ¶æ€
                    updateEmptyStates();

                    // æ’­æ”¾æˆåŠŸéŸ³æ•ˆ
                    playSuccessSound();

                    // æ˜¾ç¤ºæç¤ºä¿¡æ¯
                    showNotification('âœ… èŠ‚å‡æ—¥å·²ç§»å›èŠ‚å‡æ—¥æ± ï¼', 'success');
                }
            }
        }

        // æ”¾ç½®
        function drop(ev) {
            ev.preventDefault();

            const tierContent = ev.target.closest('.tier-content');
            const tierRow = ev.target.closest('.tier-row');

            tierContent.classList.remove('drag-over');
            tierRow.classList.remove('drag-over');

            if (draggedElement) {
                // ç§»é™¤ç©ºçŠ¶æ€æ–‡æœ¬
                const emptyText = tierContent.querySelector('.empty-text');
                if (emptyText) {
                    emptyText.remove();
                }

                // å…‹éš†å…ƒç´ å¹¶æ·»åŠ åˆ°æ–°ä½ç½®
                const clonedElement = draggedElement.cloneNode(true);
                addDragEvents(clonedElement);
                tierContent.appendChild(clonedElement);

                // ä»åŸä½ç½®ç§»é™¤
                draggedElement.remove();

                // æ›´æ–°ç©ºçŠ¶æ€
                updateEmptyStates();

                // æ’­æ”¾æˆåŠŸéŸ³æ•ˆï¼ˆå¦‚æœæ”¯æŒï¼‰
                playSuccessSound();

                // æ˜¾ç¤ºæç¤ºä¿¡æ¯
                const tierName = tierRow.dataset.tier;
                showNotification(`âœ… èŠ‚å‡æ—¥å·²æ·»åŠ åˆ° ${tierName} çº§ï¼`, 'success');
            }
        }

        // ä¸ºå…‹éš†çš„å…ƒç´ æ·»åŠ æ‹–æ‹½äº‹ä»¶
        function addDragEvents(element) {
            element.addEventListener('dragstart', function(e) {
                draggedElement = this;
                this.classList.add('dragging');
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/html', this.outerHTML);
            });

            element.addEventListener('dragend', function(e) {
                this.classList.remove('dragging');
                draggedElement = null;
            });
        }

        // æ›´æ–°ç©ºçŠ¶æ€æ˜¾ç¤º
        function updateEmptyStates() {
            document.querySelectorAll('.tier-content').forEach(content => {
                const hasCards = content.querySelectorAll('.holiday-card').length > 0;
                const hasEmptyText = content.querySelector('.empty-text');

                if (hasCards) {
                    content.classList.remove('empty');
                    if (hasEmptyText) {
                        hasEmptyText.remove();
                    }
                } else {
                    content.classList.add('empty');
                    if (!hasEmptyText) {
                        const tier = content.closest('.tier-row').dataset.tier;
                        const messages = {
                            'S': 'æ‹–æ‹½èŠ‚å‡æ—¥åˆ°è¿™é‡Œ - æœ€å–œæ¬¢çš„èŠ‚æ—¥',
                            'A': 'æ‹–æ‹½èŠ‚å‡æ—¥åˆ°è¿™é‡Œ - å¾ˆå–œæ¬¢çš„èŠ‚æ—¥',
                            'B': 'æ‹–æ‹½èŠ‚å‡æ—¥åˆ°è¿™é‡Œ - æ¯”è¾ƒå–œæ¬¢çš„èŠ‚æ—¥',
                            'C': 'æ‹–æ‹½èŠ‚å‡æ—¥åˆ°è¿™é‡Œ - ä¸€èˆ¬çš„èŠ‚æ—¥',
                            'D': 'æ‹–æ‹½èŠ‚å‡æ—¥åˆ°è¿™é‡Œ - ä¸å¤ªå–œæ¬¢çš„èŠ‚æ—¥',
                            'F': 'æ‹–æ‹½èŠ‚å‡æ—¥åˆ°è¿™é‡Œ - æœ€ä¸å–œæ¬¢çš„èŠ‚æ—¥'
                        };

                        const emptyText = document.createElement('span');
                        emptyText.className = 'empty-text';
                        emptyText.textContent = messages[tier];
                        content.appendChild(emptyText);
                    }
                }
            });
        }

        // é‡ç½®å±‚çº§åˆ—è¡¨
        function resetTierList() {
            if (confirm('ç¡®å®šè¦é‡ç½®å±‚çº§åˆ—è¡¨å—ï¼Ÿè¿™å°†ç§»é™¤æ‰€æœ‰å·²åˆ†ç±»çš„èŠ‚å‡æ—¥ã€‚')) {
                // æ¸…ç©ºæ‰€æœ‰å±‚çº§
                document.querySelectorAll('.tier-content').forEach(content => {
                    content.innerHTML = '';
                });

                // é‡æ–°æ¸²æŸ“èŠ‚å‡æ—¥æ± 
                renderHolidays();
                updateEmptyStates();

                showNotification('âœ… å±‚çº§åˆ—è¡¨å·²é‡ç½®ï¼', 'success');
            }
        }

        // å¯¼å‡ºå±‚çº§åˆ—è¡¨
        function exportTierList() {
            const tierList = {};

            document.querySelectorAll('.tier-row').forEach(row => {
                const tier = row.dataset.tier;
                const cards = row.querySelectorAll('.holiday-card');

                tierList[tier] = Array.from(cards).map(card => {
                    const holidayId = card.dataset.holidayId;
                    const holiday = holidays.find(h => h.id === holidayId);
                    return {
                        id: holidayId,
                        name: holiday ? holiday.name : 'æœªçŸ¥',
                        emoji: holiday ? holiday.emoji : 'â“'
                    };
                });
            });

            const jsonString = JSON.stringify(tierList, null, 2);

            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `holiday-tier-list-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showNotification('ğŸ“¤ å±‚çº§åˆ—è¡¨å·²å¯¼å‡ºä¸ºJSONæ–‡ä»¶ï¼', 'success');
        }

        // ä¿å­˜åˆ°æœåŠ¡å™¨
        async function saveToServer() {
            const tierList = {};

            document.querySelectorAll('.tier-row').forEach(row => {
                const tier = row.dataset.tier;
                const cards = row.querySelectorAll('.holiday-card');

                tierList[tier] = Array.from(cards).map(card => {
                    const holidayId = card.dataset.holidayId;
                    const holiday = holidays.find(h => h.id === holidayId);
                    return {
                        id: holidayId,
                        name: holiday ? holiday.name : 'æœªçŸ¥',
                        emoji: holiday ? holiday.emoji : 'â“',
                        date: holiday ? holiday.date : '',
                        category: holiday ? holiday.category : 'unknown'
                    };
                });
            });

            const tierListData = {
                title: `æˆ‘çš„èŠ‚æ—¥åå¥½æ’è¡Œ - ${new Date().toLocaleDateString()}`,
                description: 'é€šè¿‡æ‹–æ‹½åˆ›å»ºçš„èŠ‚æ—¥åå¥½å±‚çº§åˆ—è¡¨',
                tiers: Object.keys(tierList).map(tierId => ({
                    id: tierId,
                    name: `${tierId} çº§`,
                    color: getTierColor(tierId),
                    items: tierList[tierId]
                })),
                tags: ['èŠ‚å‡æ—¥', 'åå¥½', 'æ’è¡Œ'],
                isPublic: true
            };

            try {
                const response = await fetch('http://localhost:5000/api/tier-lists', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(tierListData)
                });

                if (response.ok) {
                    const result = await response.json();
                    showNotification(`âœ… å±‚çº§åˆ—è¡¨å·²æˆåŠŸä¿å­˜åˆ°æœåŠ¡å™¨ï¼åˆ—è¡¨ID: ${result.id}`, 'success', 5000);
                } else {
                    throw new Error(`æœåŠ¡å™¨é”™è¯¯: ${response.status}`);
                }
            } catch (error) {
                showNotification(`âŒ ä¿å­˜å¤±è´¥: ${error.message}ã€‚è¯·ç¡®ä¿åç«¯æœåŠ¡å™¨æ­£åœ¨è¿è¡Œã€‚`, 'warning', 5000);
            }
        }

        // è·å–å±‚çº§é¢œè‰²
        function getTierColor(tier) {
            const colors = {
                'S': '#ff6b35',
                'A': '#f7931e',
                'B': '#ffd100',
                'C': '#90ee90',
                'D': '#87ceeb',
                'F': '#ff6b6b'
            };
            return colors[tier] || '#cccccc';
        }

        // æ’­æ”¾æˆåŠŸéŸ³æ•ˆ
        function playSuccessSound() {
            // åˆ›å»ºç®€å•çš„éŸ³æ•ˆ
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.setValueAtTime(1000, audioContext.currentTime + 0.1);

            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.2);
        }

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info', duration = 3000) {
            // ç§»é™¤ç°æœ‰é€šçŸ¥
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            // åˆ›å»ºæ–°é€šçŸ¥
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;

            document.body.appendChild(notification);

            // è§¦å‘æ˜¾ç¤ºåŠ¨ç”»
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            // è‡ªåŠ¨éšè—
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 300);
            }, duration);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>